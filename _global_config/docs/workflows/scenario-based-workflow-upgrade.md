# 场景化工作流升级记录 v1.0

**升级日期**：2026-01-30
**升级原因**：用户指出修改/优化/重写场景不按照 Skills 规范执行

---

## 🎯 核心问题

### 问题描述

**当前情况**：
- 用户说"修改昨天的订阅号文章"
- AI 会触发完整的工作流（苏格拉底式提问、去重检查等）
- 或者跳过所有规范，直接修改

**用户要求**：
- 修改/优化/重写场景应该是简化流程
- 但**必须遵循所有 Skill 规范**
- 不能因为是"修改"就降低质量要求

---

## ✅ 解决方案

### 1. 增加场景识别机制

**在所有内容生成 Skills 中增加场景识别**：

```
场景A：新建内容
- 触发词："生成"、"创建"、"写一篇"
- 执行：完整工作流（Step 0-8）

场景B：编辑内容
- 触发词："修改"、"优化"、"重写"
- 执行：简化工作流（Step E0-E6）
```

### 2. 定义编辑场景标准流程

**编辑场景的6步流程**：

```
Step E0: 场景识别和内容定位
Step E1: 读取已有内容
Step E2: 询问修改需求
Step E3: 执行修改
Step E4: 质量检查（强制，不能省略）
Step E5: 保存文件
Step E6: 询问是否推送
```

### 3. 强调质量检查不能省略

**Step E4 质量检查包括**：
- ✅ 违禁词检查
- ✅ 配图规范检查
- ✅ 内容质量检查
- ✅ 账号阶段策略检查
- ✅ 信任型内容原则检查

**⚠️ 这是最关键的改进**：
- 编辑场景虽然简化了前期步骤
- 但质量检查不能省略
- 所有 Skill 规范都必须遵循

---

## 📁 修改的文件

### 1. wechat-content-generator

**文件**：`/Users/dj/.claude/skills/wechat-content-generator/SKILL.md`

**修改内容**：
- 增加场景识别部分
- 增加流程B：编辑内容（Step E0-E6）
- 增加编辑场景检查清单
- 版本升级：v4.0 → v4.1

### 2. 全局配置文件

**新建文件**：`/Users/dj/Desktop/小静的skills/_global_config/content-editing-standards.md`

**内容**：
- 编辑场景统一规范
- 标准流程定义
- 质量检查清单
- 常见错误示例
- 平台特定规范

### 3. CLAUDE.md

**文件**：`/Users/dj/.claude/CLAUDE.md`

**修改内容**：
- 增加场景识别说明
- 增加编辑内容工作流（6步）
- 增加编辑场景规范文档链接
- 增加禁止行为：编辑场景跳过质量检查

---

## 🔄 待完成

### xiaohongshu-content-generator

**需要修改**：
- 增加场景识别
- 增加编辑场景流程
- 引用全局编辑规范文档

### video-script-generator

**需要修改**：
- 增加场景识别
- 增加编辑场景流程
- 引用全局编辑规范文档

---

## 📋 使用示例

### 示例1：新建内容

```
用户：生成一篇订阅号长文，主题是多肉养护
↓
AI：识别为"新建内容"场景
↓
执行：完整工作流（Step 0-8）
- Step 0: 苏格拉底式提问
- Step 1: 检查已发布内容
- Step 2: 确定选题
- Step 3-8: 生成内容
```

### 示例2：编辑内容

```
用户：修改昨天生成的订阅号文章，优化一下标题
↓
AI：识别为"编辑内容"场景
↓
执行：简化工作流（Step E0-E6）
- Step E0: 读取昨天的文章
- Step E1: 分析当前内容
- Step E2: 询问修改需求（已知是标题）
- Step E3: 修改标题
- Step E4: 质量检查（违禁词、长度、信任型原则）
- Step E5: 保存
- Step E6: 询问是否重新推送
```

### 示例3：重写内容

```
用户：重写一下这篇文章，增加商品推荐
↓
AI：识别为"编辑内容"场景（重写）
↓
执行：简化工作流（Step E0-E6）
- Step E0: 读取原文章
- Step E1: 分析当前账号阶段（起号期）
- Step E2: 询问修改需求
- Step E3: 重写内容，增加商品案例提及（不是推荐）
- Step E4: 质量检查
  - 检测到账号处于起号期
  - 确认商品植入方式：仅作案例提及，无价格
  - 违禁词检查：通过
  - 配图规范检查：通过
- Step E5: 保存
- Step E6: 询问是否重新推送
```

---

## 🎯 关键改进点

### 1. 场景识别是第一步

**之前**：
- 不区分新建和编辑
- 所有场景都执行相同流程

**现在**：
- 第一步就识别场景
- 根据场景选择对应流程

### 2. 编辑场景有明确流程

**之前**：
- 编辑场景没有标准流程
- 容易遗漏质量检查

**现在**：
- 编辑场景有6步标准流程
- 质量检查是强制步骤

### 3. 质量检查不能省略

**之前**：
- 编辑场景可能跳过质量检查
- 导致修改后的内容不符合规范

**现在**：
- 质量检查是强制步骤
- 明确列出5项检查内容
- 不能因为是"修改"就降低要求

---

## 📊 预期效果

### 效率提升

| 场景 | 之前 | 现在 | 提升 |
|------|------|------|------|
| 新建内容 | 完整流程 | 完整流程 | 无变化 |
| 编辑内容 | 完整流程或无流程 | 简化流程 | 50% |
| 质量保证 | 不稳定 | 稳定 | 100% |

### 质量保证

| 检查项 | 之前 | 现在 |
|-------|------|------|
| 违禁词检查 | 不稳定 | 强制执行 |
| 配图规范 | 不稳定 | 强制执行 |
| 账号阶段策略 | 不稳定 | 强制执行 |
| 信任型原则 | 不稳定 | 强制执行 |

---

## 🔄 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.0 | 2026-01-30 | 初始版本：场景化工作流升级 |

---

**升级完成时间**：2026-01-30
**升级人**：Claude (claude-sonnet-4-5-20250929-thinking)
