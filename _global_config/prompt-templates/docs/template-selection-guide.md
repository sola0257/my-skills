# 模板选择指南

**版本**: v1.0
**目的**: 帮助 AI 和开发者快速选择正确的模板

## 🎯 快速决策表

| 场景 | 使用模板 | 触发关键词 |
|------|---------|-----------|
| 生成小红书文案 | `text-optimize/system-prompt-general.md` | "生成"、"文案"、"内容" |
| 生成微信文章 | `text-optimize/system-prompt-general.md` | "生成"、"文章"、"内容" |
| 生成视频脚本 | `text-optimize/system-prompt-general.md` | "生成"、"脚本"、"内容" |
| 生成配图 | `image-optimize/image-prompt-general.md` | "配图"、"图片"、"图像" |
| 知识提取 | `text-optimize/system-prompt-general.md` | "提取"、"整理"、"知识" |

## 📋 详细决策流程

### Step 1: 识别任务类型

**问题**: 这是什么类型的任务？

- **文本生成** → 继续 Step 2A
- **图像生成** → 继续 Step 2B
- **其他** → 不使用模板

### Step 2A: 文本生成场景

**问题**: 生成什么类型的文本？

- **系统提示词**（System Prompt）→ 使用 `text-optimize/system-prompt-general.md`
  - 示例：优化内容生成的提示词
  - 示例：优化知识提取的提示词

- **用户提示词**（User Prompt）→ 暂不优化
  - 说明：用户提示词通常比较简单，不需要优化

### Step 2B: 图像生成场景

**问题**: 生成什么类型的图像？

- **自然语言描述的图像** → 使用 `image-optimize/image-prompt-general.md`
  - 示例：小红书配图
  - 示例：微信公众号配图
  - 示例：视频封面

- **技术图表/图标** → 不使用模板
  - 说明：技术图表需要精确的参数，不适合自然语言优化

## 🔄 使用流程

### 流程1：在 Skill 中使用

```
1. 识别场景 → 查表选择模板
2. 读取模板文件
3. 将原始提示词插入模板
4. 调用 LLM 获取优化后的提示词
5. 使用优化后的提示词执行任务
```

### 流程2：在 Python 脚本中使用

```python
# 1. 导入优化函数
from prompt_templates.optimizer import optimize_prompt

# 2. 识别场景并选择模板类型
template_type = 'system'  # 或 'image'

# 3. 调用优化函数
optimized = optimize_prompt(original_prompt, template_type)

# 4. 使用优化后的提示词
result = generate_content(optimized)
```

## ⚠️ 常见错误

### 错误1：所有提示词都优化

**问题**: 简单的提示词也使用模板优化，浪费资源

**解决**: 只在需要高质量输出时使用模板
- ✅ 生成长文内容
- ✅ 生成复杂配图
- ❌ 简单的单句提示

### 错误2：选错模板

**问题**: 用文本模板优化图像提示词

**解决**: 严格按照决策表选择
- 文本 → `text-optimize/`
- 图像 → `image-optimize/`

### 错误3：不检查优化结果

**问题**: 盲目使用优化后的提示词，可能偏离原意

**解决**: 
- 检查优化后的提示词是否保持原意
- 如果偏离，手动调整或不使用优化

## 📊 效果评估

### 评估方法

1. **对比测试**
   - 使用原始提示词生成 → 记录质量分数
   - 使用优化提示词生成 → 记录质量分数
   - 对比差异

2. **质量指标**
   - 文本：结构化程度、完整性、专业性
   - 图像：符合预期程度、细节丰富度、美观度

3. **成本效益**
   - 优化成本：调用 LLM 的成本
   - 质量提升：生成结果的质量提升
   - ROI：质量提升是否值得优化成本

## 🔧 自定义模板

### 何时需要自定义

- 现有模板不适合特定场景
- 需要针对特定领域优化
- 需要特殊的输出格式

### 如何创建自定义模板

1. 复制现有模板
2. 修改优化策略
3. 测试效果
4. 记录版本和适用场景
5. 保存到对应目录

## 📈 持续改进

### 收集反馈

- 记录每次使用的效果
- 收集低质量案例
- 分析问题原因

### 更新模板

- 根据反馈优化模板内容
- 更新版本号
- 记录变更日志

### 分享经验

- 记录最佳实践
- 分享成功案例
- 更新使用指南
