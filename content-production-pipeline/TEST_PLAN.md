# 内容生产流水线 - 测试计划

## 测试阶段

### 阶段1：小红书单平台（当前）
**目标：** 验证基础流程
**测试用例：**
1. 正常流程：生成3个选题的小红书内容
2. 错误处理：模拟单个选题失败
3. 进度追踪：验证 TodoWrite 更新
4. 执行报告：验证报告生成

### 阶段2：双平台（小红书 + 公众号）
**目标：** 验证平台扩展
**测试用例：**
1. 选题筛选：验证公众号选题筛选逻辑
2. 数据传递：验证选题数据正确传递
3. 并发执行：验证两个平台可以独立执行

### 阶段3：全平台（小红书 + 公众号 + 视频）
**目标：** 验证完整流水线
**测试用例：**
1. 完整流程：生成10个选题的全平台内容
2. 性能测试：测试执行时间
3. 稳定性测试：连续执行多次

## 测试数据

### 测试关键词
- 家居绿植（通用）
- 办公室绿植（场景类）
- 懒人养花（人群类）
- 春季种植（季节类）

### 预期结果

**阶段1测试（3个选题）：**
```
输入：家居绿植 --count 3
预期输出：
- 选题报告：10个选题
- 小红书内容：3个文件夹，每个包含1个MD + 6张图片
- 执行报告：包含成功/失败统计
- 执行时间：10-15分钟
```

## 测试命令

### 测试1：最小化测试（1个选题）
```bash
/content-production-pipeline 测试关键词 --count 1
```

### 测试2：标准测试（3个选题）
```bash
/content-production-pipeline 家居绿植 --count 3
```

### 测试3：完整测试（10个选题）
```bash
/content-production-pipeline 办公室绿植
```

## 验证清单

### ✅ 功能验证
- [ ] 选题发现成功调用
- [ ] 选题报告正确解析
- [ ] 小红书内容生成成功
- [ ] 文件正确保存到子文件夹
- [ ] 进度追踪实时更新
- [ ] 错误处理正确执行
- [ ] 执行报告生成完整

### ✅ 性能验证
- [ ] 单个选题生成时间 < 5分钟
- [ ] 3个选题总时间 < 15分钟
- [ ] 10个选题总时间 < 60分钟
- [ ] 内存使用合理

### ✅ 稳定性验证
- [ ] 连续执行3次无错误
- [ ] API 失败能正确重试
- [ ] 单个失败不影响整体

## 已知问题

### 问题1：API 限流
**现象：** 连续生成多个选题时可能触发限流
**解决方案：** 添加延迟（每个选题间隔5秒）

### 问题2：图片生成失败
**现象：** Midjourney API 偶尔超时
**解决方案：** 重试机制 + 备用方案（Gemini）

### 问题3：执行时间过长
**现象：** 10个选题需要60分钟
**解决方案：** 未来优化并发

## 下一步

1. ✅ 完成阶段1测试
2. ⏳ 集成公众号内容生成
3. ⏳ 完成阶段2测试
4. ⏳ 集成视频脚本生成
5. ⏳ 完成阶段3测试
6. ⏳ 性能优化
7. ⏳ 发布 v1.0 正式版
