# 小红书内容生成器 v5.0 - 自动化机制说明

## 📅 更新时间
2026-01-14

---

## 🎯 两大自动化机制

### 1️⃣ 图片人物判断机制 - AI 自动决策

**问题：图片中是否加入人物，由谁决定？**

**答案：✅ 由 AI 根据选题类型自动判断**

#### 判断规则

| 选题类型 | 是否需要人物 | 使用工具 | 示例 |
|---------|-------------|---------|------|
| **产品展示类** | ❌ 不需要 | Gemini API | "春季必买！这8种开花植物" |
| **养护教程类** | ❌ 不需要 | Gemini API | "绿植养护避坑指南" |
| **场景布置类** | ✅ 需要 | Midjourney API | "我的阳台花园改造记" |
| **生活方式类** | ✅ 需要 | Midjourney API | "和植物一起的治愈生活" |
| **使用场景类** | ✅ 需要 | Midjourney API | "租房党的绿植日常" |

#### AI 判断逻辑

```python
def need_person(topic_title):
    """AI 自动判断选题是否需要人物"""

    # 需要人物的关键词
    person_keywords = [
        "生活", "日常", "氛围", "治愈", "陪伴",
        "我的", "分享", "vlog", "记录", "打造"
    ]

    # 不需要人物的关键词
    no_person_keywords = [
        "推荐", "必买", "种类", "品种", "养护",
        "教程", "方法", "技巧", "避坑", "选购"
    ]

    # 优先判断不需要人物（起号阶段以干货为主）
    if any(kw in topic_title for kw in no_person_keywords):
        return False  # 使用 Gemini API

    # 再判断需要人物
    if any(kw in topic_title for kw in person_keywords):
        return True   # 使用 Midjourney API

    # 默认不需要人物
    return False
```

#### 实际案例

**案例1：产品推荐类**
```
选题："春季必买！这8种开花植物颜值爆表"
AI判断：包含"必买"关键词 → 不需要人物
使用工具：Gemini API
生成结果：纯植物特写和场景图
```

**案例2：生活分享类**
```
选题："我的阳台花园改造记"
AI判断：包含"我的"关键词 → 需要人物
使用工具：Midjourney API（自动upscale）
生成结果：人物与植物互动的生活场景
```

---

### 2️⃣ 账号成长阶段机制 - 自动触发

**问题：起号阶段要减少商品植入，有没有触发机制？**

**答案：✅ 根据粉丝数自动判断阶段并应用策略**

#### 阶段划分

| 阶段 | 粉丝数范围 | 商品植入 | 价格信息 | 内容重点 |
|------|-----------|---------|---------|---------|
| **起号阶段** | 0-1000 | 最多1-2个要点 | ❌ 禁止 | 干货为主，建立信任 |
| **成长阶段** | 1000-5000 | 可3-4个要点 | ⚠️ 偶尔（1-2个） | 干货+转化平衡 |
| **成熟阶段** | 5000+ | 可5-6个要点 | ✅ 可以（2-3个） | 转化为主，保持价值 |

#### 触发方式

**方式1：全局配置（(推荐)**

在 `/Users/dj/.claude/CLAUDE.md` 中配置：

```markdown
## 小红书账号配置

**当前粉丝数：** 800

**说明：**
- AI 会自动读取此配置
- 粉丝数达到阶段临界值时，手动更新此配置
```

AI 执行流程：
```
1. 读取 CLAUDE.md
2. 提取粉丝数：800
3. 判断阶段：起号阶段（0-1000）
4. 应用策略：最多2个商品，禁止价格
5. 生成内容
```

**方式2：临时指定**

用户在调用时指定：
```
用户：帮我生成小红书笔记，选题是XXX，当前粉丝数1200
AI：✅ 临时指定粉丝数1200，使用成长阶段策略...
```

**方式3：默认值**

用户未提供粉丝数时：
```
AI：未提供粉丝数，默认使用起号阶段策略（粉丝数0）
```

#### 策略对比

**起号阶段（0-1000粉）：**
```markdown
① **海棠花** - 四季开花小能手 🌺
重瓣丽格海棠真的太美了！花期超长，一年四季都能开...
❌ 不提价格
✅ 重点：养护经验

② **长寿花** - 懒人福音 🪴
这个必须推荐！一个月浇一次水都没问题...
❌ 不提价格
✅ 重点：使用感受

...（其他6个要点不提商品）
```

**成长阶段（1000-5000粉）：**
```markdown
① **海棠花** - 四季开花小能手 🌺
重瓣丽格海棠真的太美了！30元左右就能买到...
✅ 可提1-2个价格
✅ 平衡干货和转化

② **长寿花** - 懒人福音 🪴
金狐狸品种的花朵又大又密，10块钱就能买一盆...
✅ 可提1-2个价格

...（可在3-4个要点中提及商品）
```

**成熟阶段（5000+粉）：**
```markdown
① **海棠花** - 四季开花小能手 🌺
重瓣丽格海棠30元，性价比超高！
✅ 可提2-3个价格

② **长寿花** - 懒人福音 🪴
金狐狸品种10块钱，白菜价！
✅ 可提2-3个价格

...（可在5-6个要点中提及商品）
```

#### 自动切换示例

**场景：账号从起号到成长**

```
Day 1: 粉丝数 0
AI：使用起号策略（最多2个商品，禁止价格）

Day 30: 粉丝数 500
AI：使用起号策略（最多2个商品，禁止价格）

Day 60: 粉丝数 1200
用户更新 CLAUDE.md：当前粉丝数 1200
AI：✅ 检测到粉丝数变化，切换到成长阶段策略
     （可3-4个商品，偶尔价格）

Day 120: 粉丝数 5500
用户更新 CLAUDE.md：当前粉丝数 5500
AI：✅ 检测到粉丝数变化，切换到成熟阶段策略
     （可5-6个商品，可提价格）
```

---

## 🔄 完整执行流程

```
用户调用 /xiaohongshu-content-generator
↓
Step 0: 读取账号配置
  - 读取 CLAUDE.md 中的粉丝数
  - 判断账号阶段（起号/成长/成熟）
  - 确定内容策略
↓
Step 1: 解析选题
  - 提取关键词
  - 判断选题类型
  - 决定是否需要人物（AI自动判断）
↓
Step 2: 匹配商品
  - 从商品库匹配相关商品
  - 根据账号阶段决定植入数量
↓
Step 3: 生成文案
  - 根据账号阶段决定是否提及价格
  - 应用对应的软植入策略
↓
Step 4: 生成配图
  - 如果需要人物 → Midjourney API（自动upscale）
  - 如果不需要人物 → Gemini API
↓
Step 5: 保存文件
  - 创建选题文件夹
  - 保存文案和配图
```

---

## ✅ 优势总结

### 1. 图片人物判断机制

**优势：**
- ✅ 无需用户手动指定
- ✅ AI 根据选题类型智能判断
- ✅ 自动选择最合适的生成工具
- ✅ 避免不必要的 Midjourney 调用（节省成本）

**用户体验：**
```
用户：帮我生成小红书笔记，选题是"春季必买8种开花植物"
AI：✅ 自动判断为产品推荐类，不需要人物
    ✅ 使用 Gemini API 生成纯植物图
    ✅ 生成速度快，文件小
```

---

### 2. 账号成长阶段机制

**优势：**
- ✅ 自动适配账号发展阶段
- ✅ 起号阶段避免过度营销
- ✅ 成长阶段平衡干货和转化
- ✅ 成熟阶段最大化转化效率

**用户体验：**
```
用户：（粉丝数800）帮我生成小红书笔记
AI：✅ 自动读取粉丝数800
    ✅ 判断为起号阶段
    ✅ 应用起号策略（最多2个商品，禁止价格）
    ✅ 生成干货为主的内容

用户：（粉丝数1200）帮我生成小红书笔记
AI：✅ 自动读取粉丝数1200
    ✅ 判断为成长阶段
    ✅ 应用成长策略（可3-4个商品，偶尔价格）
    ✅ 生成干货+转化平衡的内容
```

---

## 📌 用户操作指南

### 日常使用

**1. 首次使用：设置粉丝数**
```bash
# 编辑 /Users/dj/.claude/CLAUDE.md
当前粉丝数：0
```

**2. 生成内容：无需额外操作**
```
/xiaohongshu-content-generator 选题是"XXX"
```

**3. 粉丝数增长：更新配置**
```bash
# 当粉丝数达到1000时
当前粉丝数：1000

# 当粉丝数达到5000时
当前粉丝数：5000
```

### 临时调整

**临时指定粉丝数：**
```
/xiaohongshu-content-generator 选题是"XXX"，当前粉丝数1200
```

**临时指定是否需要人物：**
```
（不需要，AI 会自动判断）
```

---

## 🎯 总结

| 机制 | 决策者 | 触发方式 | 用户操作 |
|------|--------|---------|---------|
| **图片人物判断** | AI 自动 | 根据选题关键词 | 无需操作 |
| **账号成长阶段** | AI 自动 | 读取粉丝数配置 | 定期更新粉丝数 |

**核心理念：**
- ✅ AI 自动化决策，减少用户操作
- ✅ 智能适配账号发展阶段
- ✅ 保持内容质量和转化效率的平衡

---

*文档生成时间：2026-01-14*
