# 更新日志

## v3.2 (2026-01-14)

### 🎨 反AI痕迹优化

**hybrid_image_generator.py 更新：**
- ✅ 集成反AI痕迹规则到 `add_text_with_gemini()` 方法
- ✅ 添加尺寸标准化处理（1080×1440）
- ✅ 使用 PIL 进行高质量图片缩放
- ✅ 临时文件自动清理

**反AI痕迹规则：**
1. 避免完全对称的布局 - 文字位置略微偏移
2. 避免过度完美 - 背景条边缘略微不规则
3. 保持自然感 - 文字排版有呼吸感
4. 避免重复元素 - 不添加多余装饰
5. 保持真实感 - 像真人设计师的作品

### 🏠 真实家居场景优化

**flexible_prompt_system.md 更新：**
- ✅ 在风格基础（STYLE_BASE）中增加真实家居元素
- ✅ 添加木质花架（wooden plant stands）
- ✅ 添加金属置物架（metal shelving units）
- ✅ 添加编织篮和陶瓷盆（woven baskets and ceramic pots）
- ✅ 添加分层植物架（tiered plant racks）
- ✅ 强调真实的家具和收纳方案

**效果提升：**
- 场景更加真实可信
- 植物摆放更符合实际使用习惯
- 增强生活气息和实用性

### 📐 技术改进

**尺寸处理流程：**
```
Midjourney 生成底图 (任意尺寸)
    ↓
Gemini 添加文字 (可能改变尺寸)
    ↓
PIL 调整到标准尺寸 (1080×1440)
    ↓
最终输出 (质量95, LANCZOS算法)
```

**代码优化：**
- 添加详细的处理日志
- 添加尺寸验证输出
- 改进错误处理和异常追踪
- 自动清理临时文件

---

## v3.1 (2026-01-14)

### 新增功能
- 新增 Midjourney API 集成
- 新增混合生成器（MJ + Gemini）
- 新增分层 Prompt 系统
- 优化文件结构

### 文件组织
- 创建 scripts/ 目录存放核心脚本
- 创建 tests/ 目录存放测试文件
- 创建 README.md 说明文档

---

## v3.0

### 新增功能
- 新增商品库匹配
- 新增商品软植入

---

## v2.0

### 新增功能
- 子文件夹输出结构
- 标题字数限制
- 地域标签
