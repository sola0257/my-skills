# 视频脚本生成器 v3.2（场景化工作流）

**版本**：v3.2
**更新日期**：2026-01-30
**重大变更**：增加 Step 5.5 价值自检机制，确保内容提供价值

---

## 🔍 场景识别（强制执行）

**在执行任何操作前，必须先识别场景类型**：

### 场景A：新建内容（完整工作流）

**触发词**：
- "生成"、"创建"、"写一个"
- "帮我生成XX"、"创建一个XX脚本"

**执行流程**：
- Step 0-9 完整工作流（含 Step 5.5 价值自检）
- 包括：苏格拉底式提问、去重检查、选题确定、价值自检等

---

### 场景B：编辑内容（简化工作流）

**触发词**：
- "修改"、"调整"、"改一下"
- "优化"、"重写"、"完善"

**执行流程**：
```
Step E0: 识别为编辑场景
Step E1: 读取已有脚本
Step E2: 询问修改需求（简化提问）
Step E3: 执行修改
Step E4: 质量检查（必须遵循所有规范）
Step E5: 保存
Step E6: 询问后续操作
```

**⚠️ 重要**：
- 虽然是简化流程，但**必须遵循所有 Skill 规范**
- 包括：分镜结构、4平台封面、违禁词检查、账号阶段策略等
- 不能因为是"修改"就降低质量要求

---

## 🚨 执行协议

### 新建内容场景（两阶段）

**阶段1：交互式收集信息**
- ✅ **必须** 先进行苏格拉底式提问
- ✅ **必须** 检查已发布内容（去重）
- ✅ **必须** 根据账号阶段决定商品植入策略

**阶段2：静默执行生成**
- ❌ **禁止** 请求确认以继续
- ✅ **必须** 一次性生成完整输出（分镜 + 逐字稿 + 配图 + 4平台封面）
- ✅ **必须** 数据缺失时使用默认值或自动搜索

---

### 编辑内容场景（简化但严格）

**简化的部分**：
- ❌ 不需要苏格拉底式提问（已有内容）
- ❌ 不需要去重检查（已有内容）
- ❌ 不需要选题确定（已有选题）

**必须遵循的规范**：
- ✅ 分镜脚本结构（3-8个分镜）
- ✅ 逐字稿质量（口播自然流畅）
- ✅ 4平台封面规范（尺寸、风格）
- ✅ 违禁词检查
- ✅ 账号阶段策略（商品植入度）
- ✅ 视频类型策略（知识分享/生活感悟）

---

## 📋 核心功能

1. 生成分镜脚本（3-8个分镜）
2. 生成逐字稿（对应分镜）
3. 生成分镜配图
4. 生成4平台封面（小红书/视频号/快手/抖音）
5. 匹配商品（1-2个软植入）
6. 保存所有文件

---

## 🎯 [必需] 两种视频类型

### 类型一：知识分享类 📚
- 特点：干货知识、实用技巧、教程方法
- 时长：1-3分钟
- 结构：开场钩子 + 知识点展开 + 总结升华

### 类型二：生活感悟类 🌿
- 特点：情感共鸣、生活记录、治愈氛围
- 时长：30秒-1分钟
- 结构：场景切入 + 情感递进 + 金句收尾

**详细策略**：参考 `knowledge/video_platform_strategy.md`

---

## 🎨 [必需] 四平台适配

### 平台配图尺寸

| 平台 | 封面尺寸 | 分镜配图尺寸 |
|------|---------|-------------|
| **小红书** | 3:4竖版（1080×1440） | 3:4竖版 |
| **视频号** | 3:4竖版（1080×1440） | 3:4竖版 |
| **快手** | 9:16竖版（1080×1920） | 9:16竖版 |
| **抖音** | 9:16竖版（1080×1920） | 9:16竖版 |

### 配图风格规则

**封面图**：按照视频整体风格选择（知识类用真实感，感悟类用治愈风）
**分镜配图**：按照对应分镜内容选择风格

**详细指南**：参考 `knowledge/video-image-prompt-guide.md`（待创建）

---

## 🔄 执行流程

### 流程选择

**根据场景识别结果，选择对应的执行流程**：
- 场景A（新建内容） → 执行流程A（Step 0-9）
- 场景B（编辑内容） → 执行流程B（Step E0-E6）

---

## 📝 流程A：新建内容（完整工作流）

### Step 0: 苏格拉底式提问 [强制]

**⚠️ 重要**：这是开放式对话，不是固定选项。用户可以自由描述，AI 要智能理解。

**询问内容**：
1. 视频类型（知识分享/生活感悟）
2. 目标平台（小红书/视频号/抖音/快手/全平台）
3. 视频时长（15秒/30秒/1分钟/3分钟）
4. 内容目的（涨粉/互动/专业形象/其他）
5. 选题方向（指定选题/大致方向/AI推荐）
6. 内容深度（基础/进阶/专业/创新角度）
7. 商品植入（是/否/极少）

**详细指南**：参考 `_global_config/intelligent-topic-selection-guide.md`

---

### Step 1: 检查已发布内容 [强制]

**操作**：读取最近30天的已发布内容，识别重复话题。

---

### Step 2: 确定选题 [强制]

**核心原则**：
- ❌ 不要局限于常见植物
- ❌ 不要局限于基础养护
- ✅ 要有深度、创新、专业性
- ✅ 新手内容可以讲，但要换角度

**详细指南**：参考 `_global_config/intelligent-topic-selection-guide.md`

---

### Step 3: 知识搜索 [必需，静默执行]

**要求**：
- 搜索专业、深度、创新的内容
- 不要只搜索基础养护知识
- 要有科学依据、专业术语

**详细指南**：参考 `_global_config/intelligent-topic-selection-guide.md`

- 使用 WebSearch 搜索相关知识
- 搜索本地知识库
- 整合网络和本地知识

---

### Step 4: 商品匹配 [条件执行，静默执行]

**执行条件**：
- 用户在 Step 0 中明确要求商品植入
- 或内容目的是"推销商品"

**根据账号阶段执行不同策略**：

**起号期（0-500粉）**：
- ✅ 执行商品匹配（了解有哪些相关商品）
- ✅ 仅在口播中自然提及1次（如："我自己用的是XX"）
- ❌ 禁止价格
- ❌ 禁止直接推荐
- ⚠️ 商品不主导内容方向，内容价值优先

**成长期（500-2000粉）**：
- ✅ 执行商品匹配
- ✅ 口播中软植入（1-2次自然提及）
- ✅ 评论区引导
- ✅ 可以提价格（客观对比）
- ⚠️ 内容比例：80%价值 + 20%引导

**成熟期（2000+粉）**：
- ✅ 执行商品匹配
- ✅ 可挂链接
- ✅ 可说价格
- ✅ 可直接推荐
- ⚠️ 内容比例：70%价值 + 30%转化

---

### Step 5: 解析输入 [必需，静默执行]

**从此步骤开始，进入静默执行模式，不再请求确认**

- 识别视频类型（知识分享/生活感悟）
- 识别目标平台（默认全平台）
- 确定视频时长

---

### Step 5.5: 价值自检 [强制，不能跳过] ⚠️

**⚠️ 这是最关键的步骤，决定内容是否有价值**

**必须回答以下6个问题并输出**：

1. **目标读者是谁？**（具体描述）
2. **读者有什么问题/痛点？**（具体问题）
3. **这个内容能解决什么问题？**（具体方案）
4. **读者看完后能得到什么？**（可执行收获）
5. **为什么读者应该相信你？**（可信度支撑）
6. **这个内容的独特价值是什么？**（差异化）

**如果有任何一个问题答不上来 → 停止生成，重新思考选题**

**详细指南**：参考 `_global_config/content-value-checklist.md`

---

### Step 6: 生成分镜脚本 [必需，静默执行]
- 根据视频类型选择结构
- 生成3-8个分镜

---

### Step 7: 生成逐字稿 [必需，静默执行]

---

### Step 8: 生成配图 [必需，静默执行]

---

### Step 9: 保存文件 [必需，静默执行]
- 每个分镜包含：画面描述、时长、文案要点

### Step 5: 生成逐字稿 [必需]
- 对应每个分镜生成口播文案
- 自然口语化表达
- 植入商品（1-2处）

### Step 6: 生成配图 [必需]
- 生成分镜配图（根据平台选择尺寸）
- 生成4平台封面
- 调用 generate_video_images.py

### Step 7: 保存输出 [必需]
- 保存分镜脚本 Markdown
- 保存逐字稿
- 保存所有配图
- 保存发布信息

**检查点**：
- [ ] 已执行知识搜索
- [ ] 已匹配商品
- [ ] 已生成分镜脚本
- [ ] 已生成逐字稿
- [ ] 已生成配图（含4平台封面）

---

## 📦 输出结构

```
/Users/dj/Desktop/全域自媒体运营/内容发布/发布记录/2026/视频脚本/
└── 2026-01-29_选题名称/
    ├── 2026-01-29_选题名称_分镜脚本.md
    ├── 2026-01-29_选题名称_逐字稿.md
    ├── 发布信息.md
    ├── 分镜配图/
    │   ├── 01.png, 02.png, 03.png...
    ├── 封面/
    │   ├── 小红书_封面.png (3:4)
    │   ├── 视频号_封面.png (3:4)
    │   ├── 快手_封面.png (9:16)
    │   └── 抖音_封面.png (9:16)
    └── data.json
```

---

## ✏️ 流程B：编辑内容（简化但严格工作流）

**详细流程参考**：`/Users/dj/Desktop/小静的skills/_global_config/content-editing-standards.md`

### Step E0-E2: 场景识别、读取内容、询问需求 [强制]

**操作**：
1. 识别为编辑场景
2. 读取已有脚本（分镜 + 逐字稿 + 配图）
3. 使用 AskUserQuestion 询问修改需求

---

### Step E3: 执行修改 [必需，静默执行]

**根据修改需求执行**，遵循视频脚本所有规范。

---

### Step E4: 质量检查 [强制，静默执行]

**⚠️ 不能因为是"修改"就跳过质量检查**

**必须执行的检查**：

1. **分镜脚本结构检查**
   - 知识分享类：开场钩子 + 知识点展开 + 总结升华
   - 生活感悟类：场景切入 + 情感递进 + 金句收尾
   - 分镜数量：3-8个

2. **逐字稿质量检查**
   - 口播自然流畅
   - 符合视频类型风格
   - 时长控制合理

3. **配图规范检查**
   - 小红书/视频号：3:4竖版（1080×1440）
   - 抖音/快手：9:16竖版（1080×1920）
   - 4平台封面：分别生成对应尺寸

4. **违禁词检查**
   - 调用 `compliance-checker`
   - 确保无违禁词、夸张用语

5. **账号阶段策略检查**
   - 起号期（0-500粉）：仅在口播中自然提及1次，禁止价格
   - 成长期（500-2000粉）：口播中软植入1-2次，可提价格
   - 成熟期（2000+粉）：可挂链接，可说价格

---

### Step E5: 保存文件 [必需，静默执行]

**保存**：
- 分镜脚本文档
- 逐字稿文档
- 所有配图
- 4平台封面
- 更新元数据（标注修改时间）

---

### Step E6: 询问后续操作 [必需]

**询问**：是否需要手动发布到视频平台？

---

## 📋 编辑场景检查清单

- [ ] 已识别为编辑场景
- [ ] 已读取已有脚本
- [ ] 已询问修改需求
- [ ] 已执行修改
- [ ] **已进行质量检查（分镜结构、逐字稿、配图、违禁词、账号阶段）**
- [ ] 已保存文件
- [ ] 已询问后续操作

---

## 📚 详细文档

- **平台策略手册**：`knowledge/video_platform_strategy.md`
- **配图生成指南**：`knowledge/video-image-prompt-guide.md`（待创建）
- **脚本模板库**：`knowledge/video-script-templates.md`
- **平台适配指南**：`knowledge/platform-adaptation-guide.md`

---

## 🔧 依赖

- `product-catalog` (Skill) - 商品匹配
- `WebSearch` - 知识搜索
- `scripts/generate_video_images.py` - 配图生成

---

**版本历史**：
- v3.2 (2026-01-30): 增加 Step 5.5 价值自检机制
- v3.1 (2026-01-30): 增加场景识别，区分新建和编辑流程
- v3.0 (2026-01-30): 采用苏格拉底式提问 + 去重检查 + 静默执行
- v2.1 (2026-01-29): 按照四层机制精简 SKILL.md，明确配图尺寸规范
- v2.0 (2026-01-14): 新增内容策略核心
- v1.1 (2026-01-13): 新增 MidJourney 高质量配图
