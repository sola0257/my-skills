# æ’ç”»é£æ ¼è½¬æ¢å™¨ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è®¾ç½® API Key

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export YUNWU_API_KEY="your_api_key_here"
```

### 2. æµ‹è¯•è„šæœ¬

```bash
cd /Users/dj/Desktop/å°é™çš„skills/illustration-converter/scripts
python3 generate_illustration.py
```

è¿™å°†ç”Ÿæˆä¸¤ä¸ªæµ‹è¯•ï¼š
- æ¸…æ–°æ°´å½©ï¼ˆä¸œæ–¹ï¼‰é£æ ¼çš„å¤šè‚‰æ¤ç‰©
- è´è¶å…°çš„å½©é“…æ­¥éª¤å›¾ï¼ˆ5å¼ ï¼‰

---

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šé€šè¿‡ Python è„šæœ¬

```python
from generate_illustration import IllustrationGenerator

# åˆ›å»ºç”Ÿæˆå™¨
generator = IllustrationGenerator()

# ç”Ÿæˆå•å¼ æ’ç”»
output_path = generator.generate_illustration(
    style_code="watercolor_oriental",  # é£æ ¼ä»£ç 
    subject="å¤šè‚‰æ¤ç‰©æ¡ƒè›‹",              # æ¤ç‰©åç§°
    details="åœ†æ¶¦é¥±æ»¡çš„å¶ç‰‡ï¼Œè¡¨é¢æœ‰ç™½éœœ",  # ç»†èŠ‚æè¿°
    mood="æ²»æ„ˆã€æ¸©æŸ”"                    # æƒ…ç»ªå…³é”®è¯
)

# ç”Ÿæˆå½©é“…æ­¥éª¤å›¾
step_paths = generator.generate_pencil_steps(
    subject="è´è¶å…°",
    details="ç™½è‰²èŠ±ç“£å¸¦æ·¡é»„è‰²ä¸­å¿ƒ"
)
```

### æ–¹æ³•2ï¼šé€šè¿‡ Skill è°ƒç”¨

```bash
# åœ¨ Claude Code ä¸­è°ƒç”¨
/illustration-converter
```

ç„¶åæŒ‰ç…§äº¤äº’å¼æé—®é€‰æ‹©é£æ ¼å’Œå‚æ•°ã€‚

---

## ğŸ¨ æ”¯æŒçš„é£æ ¼ä»£ç 

| é£æ ¼ä»£ç  | ç”¨æˆ·å‹å¥½åç§° | è¯´æ˜ |
|---------|-------------|------|
| `watercolor_oriental` | æ¸…æ–°æ°´å½©ï¼ˆä¸œæ–¹ï¼‰ | ç•™ç™½å¤šã€æ·¡é›…ã€æ™•æŸ“ |
| `watercolor_western` | æ¸…æ–°æ°´å½©ï¼ˆè¥¿æ–¹ï¼‰ | ç»†èŠ‚ä¸°å¯Œã€æ¤ç‰©æ’ç”»é£æ ¼ |
| `ink_oriental` | æ°´å¢¨å›½ç”»ï¼ˆä¸œæ–¹ï¼‰ | æ°´å¢¨ã€å†™æ„ã€è¯—æ„ |
| `ink_western` | æ°´å¢¨å›½ç”»ï¼ˆè¥¿æ–¹ï¼‰ | ç°ä»£æ°´å¢¨ã€èåˆé£æ ¼ |
| `pencil_oriental` | ç»†è…»å½©é“…ï¼ˆä¸œæ–¹ï¼‰ | æŸ”å’Œã€æ·¡é›…ã€ç•™ç™½ |
| `pencil_western` | ç»†è…»å½©é“…ï¼ˆè¥¿æ–¹ï¼‰ | å†™å®ã€å…‰å½±ã€ç»†èŠ‚ |
| `pencil_steps` | ç»†è…»å½©é“…ï¼ˆæ­¥éª¤å›¾ï¼‰ | 5æ­¥åˆ†æ­¥éª¤å›¾ï¼Œå¸¦ä¸­æ–‡æ ‡æ³¨ |
| `oil_oriental` | è´¨æ„Ÿæ²¹ç”»ï¼ˆä¸œæ–¹ï¼‰ | å«è“„ã€æ„å¢ƒã€æŸ”å’Œ |
| `oil_western` | è´¨æ„Ÿæ²¹ç”»ï¼ˆè¥¿æ–¹ï¼‰ | æµ“éƒã€æˆå‰§ã€å¤å…¸ |
| `gouache_oriental` | è£…é¥°å½©ç»˜ï¼ˆä¸œæ–¹ï¼‰ | å¹³æ¶‚ã€è£…é¥°ã€æ°‘é—´è‰ºæœ¯ |
| `gouache_western` | è£…é¥°å½©ç»˜ï¼ˆè¥¿æ–¹ï¼‰ | ç°ä»£ã€è®¾è®¡æ„Ÿã€å•†ä¸šæ’ç”» |

---

## ğŸ”§ æ ¸å¿ƒç‰¹æ€§

### 1. å›ºå®šæ¨¡å‹æ˜ å°„

æ¯ä¸ªé£æ ¼å›ºå®šä½¿ç”¨ä¸€ä¸ªæ¨¡å‹ï¼Œä¿è¯è§†è§‰ä¸€è‡´æ€§ï¼š

```python
STYLE_MODEL_MAPPING = {
    "watercolor_oriental": "gemini-3-pro-image-preview",
    "watercolor_western": "gemini-3-pro-image-preview",
    # ... æ‰€æœ‰é£æ ¼éƒ½å›ºå®šæ˜ å°„
}
```

**ä¿è¯**ï¼š
- âœ… åŒä¸€é£æ ¼æ°¸è¿œä½¿ç”¨åŒä¸€æ¨¡å‹
- âœ… è§†è§‰æ„Ÿå—ä¿æŒä¸€è‡´
- âœ… ä¸ä¼šå‡ºç°"è¿™æ¬¡ Geminiï¼Œä¸‹æ¬¡ DALL-E"çš„æƒ…å†µ

### 2. è‡ªåŠ¨é‡è¯•æœºåˆ¶

API è°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰ï¼š

```python
def generate_single_image(self, prompt, output_path, max_retries=3):
    for attempt in range(max_retries):
        try:
            # è°ƒç”¨ API
            # ...
        except Exception as e:
            if attempt < max_retries - 1:
                print("â³ é‡è¯•ä¸­...")
                continue
```

### 3. å½©é“…æ­¥éª¤å›¾

è‡ªåŠ¨ç”Ÿæˆ5ä¸ªæ­¥éª¤ï¼š
1. æ­¥éª¤1ï¼šçº¿ç¨¿
2. æ­¥éª¤2ï¼šé“ºåº•è‰²
3. æ­¥éª¤3ï¼šæ·±åŒ–è‰²å½©
4. æ­¥éª¤4ï¼šç»†èŠ‚åˆ»ç”»
5. æ­¥éª¤5ï¼šå®Œæˆ

æ¯ä¸ªæ­¥éª¤éƒ½å¸¦ä¸­æ–‡æ ‡æ³¨ï¼Œé€‚åˆæ•™ç¨‹ç±»å†…å®¹ã€‚

---

## ğŸ“ è¾“å‡ºç»“æ„

```
/Users/dj/Desktop/å°é™çš„skills/illustration-converter/.tmp/
â”œâ”€â”€ watercolor_oriental_20260131_123456_æ¡ƒè›‹å¤šè‚‰.png
â”œâ”€â”€ pencil_steps_è´è¶å…°/
â”‚   â”œâ”€â”€ æ­¥éª¤1_çº¿ç¨¿.png
â”‚   â”œâ”€â”€ æ­¥éª¤2_é“ºåº•è‰².png
â”‚   â”œâ”€â”€ æ­¥éª¤3_æ·±åŒ–è‰²å½©.png
â”‚   â”œâ”€â”€ æ­¥éª¤4_ç»†èŠ‚åˆ»ç”».png
â”‚   â””â”€â”€ æ­¥éª¤5_å®Œæˆ.png
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šAPI Key æœªè®¾ç½®

```
ValueError: æœªæ‰¾åˆ° API Keyï¼Œè¯·è®¾ç½®ç¯å¢ƒå˜é‡ YUNWU_API_KEY
```

**è§£å†³**ï¼š
```bash
export YUNWU_API_KEY="your_api_key_here"
```

### é—®é¢˜2ï¼šç”Ÿæˆå¤±è´¥

```
âŒ ç”Ÿæˆå¤±è´¥: API è°ƒç”¨å¤±è´¥
```

**å¯èƒ½åŸå› **ï¼š
- API Key æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜
- API æœåŠ¡æš‚æ—¶ä¸å¯ç”¨

**è§£å†³**ï¼š
- æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç­‰å¾…ç‰‡åˆ»åé‡è¯•

### é—®é¢˜3ï¼šæœªæ‰¾åˆ°å›¾ç‰‡æ•°æ®

```
âŒ æœªæ‰¾åˆ°å›¾ç‰‡æ•°æ®
```

**å¯èƒ½åŸå› **ï¼š
- Prompt æ ¼å¼ä¸æ­£ç¡®
- API è¿”å›æ ¼å¼å˜åŒ–

**è§£å†³**ï¼š
- æ£€æŸ¥ Prompt æ˜¯å¦ç¬¦åˆè§„èŒƒ
- æŸ¥çœ‹ API è¿”å›çš„åŸå§‹å†…å®¹

---

## ğŸ“ ä¸‹ä¸€æ­¥ä¼˜åŒ–

### 1. å®Œå–„ Prompt æ¨¡æ¿

å½“å‰è„šæœ¬ä½¿ç”¨ç®€åŒ–ç‰ˆ Promptï¼Œå»ºè®®ï¼š
- ä» `knowledge/style-prompt-templates.md` è¯»å–å®Œæ•´æ¨¡æ¿
- å®ç°æ¨¡æ¿å˜é‡æ›¿æ¢ç³»ç»Ÿ

### 2. æ·»åŠ å›¾ç‰‡åˆ†æåŠŸèƒ½

- åˆ†æä¸Šä¼ å›¾ç‰‡çš„æ„å›¾ã€è‰²å½©ã€å…‰çº¿
- åŸºäºåˆ†æç»“æœæ¨èæœ€é€‚åˆçš„é£æ ¼

### 3. æ‰¹é‡ç”ŸæˆåŠŸèƒ½

- ä¸€æ¬¡ç”Ÿæˆå¤šç§é£æ ¼é¢„è§ˆ
- ç”¨æˆ·é€‰æ‹©æœ€å–œæ¬¢çš„å†ç”Ÿæˆé«˜æ¸…ç‰ˆ

### 4. é£æ ¼æ··åˆåŠŸèƒ½

- å…è®¸æ··åˆä¸¤ç§é£æ ¼çš„ç‰¹ç‚¹
- ä¾‹å¦‚ï¼š"å›½ç”»çš„ç•™ç™½ + æ°´å½©çš„è‰²å½©"

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **SKILL.md** - Skill æ‰§è¡Œæµç¨‹å’Œç´¢å¼•
- **knowledge/style-prompt-templates.md** - å®Œæ•´ Prompt æ¨¡æ¿åº“
- **knowledge/style-model-mapping.md** - é£æ ¼-æ¨¡å‹æ˜ å°„è¡¨
- **README.md** - éƒ¨ç½²å®ŒæˆæŠ¥å‘Š

---

**åˆ›å»ºæ—¶é—´**ï¼š2026-01-31
**ç‰ˆæœ¬**ï¼šv1.0
