---
name: topic-discovery
description: "根据行业/领域自动搜索近期爆款热点，进行趋势洞察分析，输出适合小红书、公众号、视频号、快手、抖音等全平台的选题建议。植物品种基于热点，不受商品库限制。"
license: MIT
version: "4.0"
---

# 选题发现器 v4.0

## 核心原则（v4.0 重要更新）

```
❌ 错误：商品库 → 选题（商品决定选题）
✅ 正确：热点/需求 → 选题 → [可选] 商品采集建议（选题指导商品）
```

| 原则 | 说明 |
|------|------|
| **植物品种不受限** | 选题中的植物基于热点搜索和用户需求，不局限于商品库已有品种 |
| **商品匹配为可选** | 仅在明确"带货目标"时才匹配商品库 |
| **反向完善商品库** | 好的选题涉及新植物 → 输出"待采集商品建议" |

---

## 静默执行协议（必须遵守）

**执行规则：**
- ❌ **禁止** 请求确认以继续
- ❌ **禁止** 询问"是否需要更多信息"
- ❌ **禁止** 中途停顿等待用户反馈
- ✅ **必须** 一次性输出完整报告（热点 + 选题 + 趋势）
- ✅ **必须** 数据缺失时使用默认值或扩展搜索范围
- ✅ **必须** 遇到错误时静默处理并继续

---

## 概述

用户提供行业/领域关键词后，自动完成以下任务：
1. 搜索近7天的爆款热点内容
2. 分析行业趋势和内容机会
3. 输出 **10个具体选题建议**（含多平台适配标签）
4. **[可选]** 商品匹配（仅当明确带货目标时）
5. **[新增]** 输出"待采集商品建议"（选题涉及但商品库没有的植物）
6. 保存报告至选题库

---

## 配置信息

### 默认配置
- **搜索周期**: 近7天
- **选题数量**: 10个
- **目标平台**: 小红书、公众号、视频号、快手、抖音
- **商品匹配**: 默认关闭（仅带货目标时开启）

### 输出路径
```
/Users/dj/Desktop/全域自媒体运营/选题库/
└── 2026-01-14_[行业关键词]_选题报告.md
```

---

## 选题策略核心

### 选题公式
```
用户痛点/场景 + 解决方案 + 数字/对比 = 高转化选题
```

> ⚠️ 注意：植物品种基于热点和用户需求，不限于商品库

### 选题优先级（按转化率排序）

| 优先级 | 选题类型 | 转化能力 | 说明 |
|--------|----------|----------|------|
| 1️⃣ | **场景痛点类** | ⭐⭐⭐⭐⭐ | 最高转化，直击用户需求 |
| 2️⃣ | **新手避坑类** | ⭐⭐⭐⭐ | 建立信任，降低决策门槛 |
| 3️⃣ | **季节时令类** | ⭐⭐⭐ | 蹭热度，有时效性 |
| 4️⃣ | **送礼推荐类** | ⭐⭐⭐ | 客单价高，节日刚需 |
| 5️⃣ | **养护知识类** | ⭐⭐ | 转化率低，但可积累知识库 |

### 选题模板库

**场景痛点类模板：**
- 《[空间]光线[好/不好]？这[数字]种[特点]绿植最适合你》
- 《[人群]必备！[数字]种绿植让[场景]有[感受]》
- 《[空间]放什么绿植？这[数字]种[特点]还[特点]》

**新手避坑类模板：**
- 《养花新手必看！这[数字]种绿植[特点]》
- 《为什么你的[植物]总是[问题]？[数字]个原因[数字]%的人都不知道》
- 《第一次养[植物]？避开这[数字]个坑》

**季节时令类模板：**
- 《[季节]养什么绿植？这[数字]种[特点]又[特点]》
- 《[季节]必买的[数字]种[类型]植物》

**送礼推荐类模板：**
- 《送[对象]什么绿植好？这[数字]种[特点]又[特点]》
- 《[场景]送什么？这[数字]种绿植最[特点]》

### 场景需求矩阵

| 场景分类 | 具体场景 | 用户痛点 | 推荐植物方向（不限于商品库） |
|---------|---------|---------|---------------------------|
| **空间场景** | 客厅、卧室、厨房、卫生间、阳台、办公桌 | 光线、空间、湿度 | 耐阴植物、小型植物、耐湿植物 |
| **人群场景** | 租房党、上班族、新手、懒人、资深玩家 | 预算、时间、经验 | 平价好养、耐旱植物、高端稀有品种 |
| **功能场景** | 净化空气、装饰、送礼、风水 | 实用性、颜值、寓意 | 功能性植物、高颜值网红款、寓意好的植物 |
| **问题场景** | 光线不好、空间小、经常出差、有宠物 | 养不活、没地方、没时间、安全 | 耐阴植物、迷你植物、耐旱植物、无毒植物 |

### 选题禁区 ⚠️

**不要做的选题：**
- ❌ **纯科普知识**：如《植物的光合作用》（用户不关心，转化率为0）
- ❌ **太宽泛的话题**：如《如何养好植物》（没有针对性）
- ❌ **负面内容**：如《这些植物有毒千万别养》（吓跑用户）

---

## 执行流程

### Step 1: 解析输入

**输入格式判断：**
| 输入类型 | 示例 | 处理方式 |
|----------|------|----------|
| 明确行业 | "家居绿植" | 直接搜索 |
| 模糊领域 | "关于生活" | 细化为3-5个子领域 |
| 带时间限定 | "最近一周的AI热点" | 调整搜索时间范围 |
| 指定平台 | "适合小红书的美妆选题" | 优先该平台权重 |
| 带货模式 | "家居绿植 --sell" | 启用商品匹配 |

**默认值规则：**
- 未指定时间 → 默认近7天
- 未指定平台 → 输出全平台建议
- 未指定数量 → 默认10个选题
- 未指定带货 → 默认不匹配商品库

### Step 2: 多源热点搜索

**使用 search_web 工具搜索以下维度：**

1. **平台热点搜索**（5次并行搜索）
   ```
   - "[行业] 小红书 爆款 2026"
   - "[行业] 抖音 热门 话题"
   - "[行业] 公众号 10w+"
   - "[行业] 快手 热门视频"
   - "[行业] 视频号 爆款"
   ```

2. **行业趋势搜索**
   ```
   - "[行业] 行业趋势 2026"
   - "[行业] 最新动态"
   ```

3. **内容形式搜索**
   ```
   - "[行业] 爆款标题公式"
   - "[行业] 热门话题榜"
   ```

**搜索结果处理：**
- 提取热点话题、爆款标题、流量密码
- 识别上升趋势和下降趋势
- 分析各平台内容偏好差异
- **提取热门植物品种（不限于商品库）**

### Step 3: 趋势分析

**分析维度：**
| 维度 | 分析内容 |
|------|----------|
| 内容形式 | 图文 vs 短视频 vs 长视频的热度对比 |
| 话题周期 | 是短期热点还是长期趋势 |
| 情绪基调 | 正向激励 / 问题解决 / 情感共鸣 |
| 受众画像 | 主要目标人群特征 |
| 竞争程度 | 内容饱和度评估 |
| **热门植物** | 当前热度高的植物品种（不限于商品库） |

**趋势判断标记：**
- 📈 **上升趋势** - 热度持续增长
- 📊 **稳定** - 热度平稳
- 📉 **下降趋势** - 热度减退
- 🆕 **新兴话题** - 刚出现的机会点

### Step 4: 生成选题建议

**每个选题包含：**
| 字段 | 说明 |
|------|------|
| 选题标题 | 具体可执行的选题方向 |
| 选题角度 | 切入点和差异化描述 |
| 涉及植物 | 热点植物品种（不限于商品库） |
| 目标人群 | 受众画像 |
| 内容形式 | 图文 / 短视频 / 长视频 |
| 推荐平台 | 带权重的平台标签 |
| 爆款潜力 | 1-5星评分 |
| 参考标题 | 各平台适配的标题示例 |

**平台标签系统：**
```
🔴 小红书 - 适合种草、教程、生活方式
🟢 公众号 - 适合深度、干货、专业内容
🔵 抖音   - 适合娱乐、热点、短平快
🟡 快手   - 适合实用、接地气、真实感
🟣 视频号 - 适合品质、调性、私域导流
```

**爆款潜力评分规则：**
| 星级 | 判断标准 |
|------|----------|
| ⭐⭐⭐⭐⭐ | 热点上升期 + 低竞争 + 多平台适配 |
| ⭐⭐⭐⭐☆ | 热点稳定期 + 中等竞争 |
| ⭐⭐⭐☆☆ | 长期需求 + 竞争较大 |
| ⭐⭐☆☆☆ | 下降趋势或高度饱和 |

### Step 4.5: 商品匹配（可选，仅带货模式）

> ⚠️ **此步骤仅在带货模式下执行（用户指定 `--sell` 或选择"带货目标"）**

**调用 product-catalog 进行商品匹配：**

```python
def match_products_if_selling(topic: dict, selling_mode: bool):
    """
    仅在带货模式下匹配商品
    
    参数:
        topic: 选题信息
        selling_mode: 是否带货模式
    
    返回:
        匹配的商品列表 或 None
    """
    if not selling_mode:
        return None  # 不匹配商品
    
    # 从选题提取关键词
    keywords = extract_keywords(topic['title'])
    
    # 调用商品库匹配
    matched = match_products(keywords, max_results=3)
    
    return matched if matched else None
```

### Step 4.6: 商品采集建议（v4.0 新增）

> **反向完善商品库：选题涉及但商品库没有的植物和周边产品**

**采集范围：**
- 🌱 **植物本体**：选题涉及的植物品种
- 🛠️ **周边产品**：肥料、土壤、配土、工具、花盆、装饰等

```python
def generate_product_suggestions(topics: list, product_catalog: list):
    """
    生成商品采集建议
    
    逻辑：
    1. 提取选题涉及的植物和周边产品
    2. 对比商品库已有商品
    3. 输出待采集建议（植物 + 周边产品）
    """
    suggestions = {
        'plants': [],      # 待采集植物
        'accessories': []  # 待采集周边产品
    }
    
    for topic in topics:
        # 1. 提取植物
        plants = extract_plant_names(topic['title'], topic['content'])
        for plant in plants:
            if not is_in_catalog(plant, product_catalog):
                suggestions['plants'].append({
                    'name': plant,
                    'topic': topic['title'],
                    'priority': calculate_priority(topic)
                })
        
        # 2. 提取周边产品需求
        accessories = extract_accessory_needs(topic)
        # 例如："换盆教程" → 需要营养土、花盆
        # 例如："施肥技巧" → 需要有机肥、缓释肥
        for acc in accessories:
            if not is_in_catalog(acc, product_catalog):
                suggestions['accessories'].append({
                    'name': acc,
                    'category': acc['category'],  # 土壤/肥料/工具/花盆
                    'topic': topic['title'],
                    'priority': calculate_priority(topic)
                })
    
    return suggestions

def extract_accessory_needs(topic: dict) -> list:
    """
    根据选题推断周边产品需求
    
    规则：
    - 换盆/上盆 → 营养土、花盆、陶粒
    - 施肥/养护 → 有机肥、缓释肥、营养液
    - 修剪/造型 → 园艺剪、绑带
    - 浇水 → 喷壶、浇水器
    - 病虫害 → 杀虫剂、杀菌剂
    """
    keywords_map = {
        '换盆|上盆|移栽': ['营养土', '花盆', '陶粒', '底肥'],
        '施肥|追肥|营养': ['有机肥', '缓释肥', '营养液', '叶面肥'],
        '修剪|造型|打顶': ['园艺剪', '绑带', '支架'],
        '浇水|喷雾|保湿': ['喷壶', '浇水器', '湿度计'],
        '病虫害|黄叶|烂根': ['杀虫剂', '杀菌剂', '多菌灵'],
        '扦插|繁殖': ['生根粉', '育苗盘', '珍珠岩']
    }
    
    needs = []
    title = topic.get('title', '')
    
    for pattern, products in keywords_map.items():
        if re.search(pattern, title):
            for product in products:
                needs.append({
                    'name': product,
                    'category': categorize_product(product)
                })
    
    return needs
```

### Step 5: 生成报告并保存

**报告文件命名：**
```
[日期]_[行业关键词]_选题报告.md
示例：2026-01-14_家居绿植_选题报告.md
```

---

## 输出模板

```markdown
# [行业] 选题发现报告

> 📅 生成时间：[YYYY-MM-DD HH:mm]
> 📊 数据周期：近7天
> 🎯 覆盖平台：小红书 / 公众号 / 抖音 / 快手 / 视频号
> 🛒 商品匹配：[关闭/开启]

---

## 行业热点概览

| 热点话题 | 热度指数 | 趋势 | 主要平台 | 热门植物 |
|----------|----------|------|----------|----------|
| [话题1] | ⭐⭐⭐⭐⭐ | 📈 上升 | 🔴🔵 | 鹤望兰、龟背竹 |
| [话题2] | ⭐⭐⭐⭐☆ | 📊 稳定 | 🟢🟣 | 琴叶榕、天堂鸟 |
| [话题3] | ⭐⭐⭐☆☆ | 🆕 新兴 | 🔴🟡 | 春羽、龙血树 |
| ... | ... | ... | ... | ... |

---

## 选题推荐

### 1️⃣ [选题标题]

| 维度 | 内容 |
|------|------|
| **选题角度** | [切入点描述] |
| **涉及植物** | [植物1、植物2]（基于热点，不限于商品库） |
| **目标人群** | [受众画像] |
| **内容形式** | 图文 / 短视频 |
| **推荐平台** | 🔴小红书 🟢公众号 |
| **爆款潜力** | ⭐⭐⭐⭐☆ |

**参考标题：**
- 🔴 小红书：「[适合小红书的标题]」
- 🟢 公众号：「[适合公众号的标题]」
- 🔵 抖音：「[适合抖音的标题]」

---

### 2️⃣ [选题标题]
... (重复格式，共10个选题)

---

## 趋势洞察

### 🔺 上升趋势
1. [趋势描述1]
2. [趋势描述2]

### 🌱 热门植物趋势（本周）
| 植物 | 热度变化 | 主要场景 |
|------|----------|----------|
| 鹤望兰 | 📈 +35% | 北欧风客厅 |
| 春羽 | 📈 +28% | 大叶植物爱好者 |
| ... | ... | ... |

### 🎯 内容机会
1. [机会点1 + 执行建议]
2. [机会点2 + 执行建议]

### ⚠️ 避坑提醒
1. [需要规避的内容方向]
2. [过度饱和的话题]

---

## 🛒 商品采集建议（选题涉及但商品库暂无）

> 以下商品在本次选题中出现，但商品库尚未上架，建议从1688采集

### 🌱 植物本体

| 植物名称 | 涉及选题 | 采集优先级 | 预估热度 |
|----------|----------|------------|----------|
| 鹤望兰 | 选题1、选题3 | ⭐⭐⭐⭐⭐ | 高 |
| 春羽 | 选题5 | ⭐⭐⭐⭐ | 中高 |
| 量天尺 | 选题7 | ⭐⭐⭐ | 中 |

### 🛠️ 周边产品

| 产品名称 | 类别 | 涉及选题 | 采集优先级 | 说明 |
|----------|------|----------|------------|------|
| 多肉专用土 | 土壤配土 | 选题2「多肉换盆教程」 | ⭐⭐⭐⭐⭐ | 选题涉及换盆，需要配套土壤 |
| 缓释肥 | 肥料 | 选题4「春季施肥指南」 | ⭐⭐⭐⭐ | 选题核心产品 |
| 园艺剪 | 工具 | 选题6「修剪造型技巧」 | ⭐⭐⭐ | 教程配套工具 |
| 陶瓷花盆 | 花盆容器 | 选题8「北欧风搭配」 | ⭐⭐⭐⭐ | 场景化需求 |

---

## 🚀 下一步行动

选择心仪的选题后，使用以下技能快速生成内容：

| 目标平台 | 触发词示例 |
|----------|------------|
| 小红书 | `帮我生成小红书图文，选题是：[选题X]` |
| 公众号 | `帮我生成订阅号推文，选题是：[选题X]` |
| 短视频脚本 | `帮我写[选题X]的短视频脚本` |

---

*报告由 Topic Discovery Skill v4.0 自动生成*
```

---

## ✅ Good Case（正确示例）

**用户输入：**
```
帮我找家居绿植的选题
```

**正确执行：**
1. ✅ 识别行业：家居绿植
2. ✅ 默认模式：不匹配商品库
3. ✅ 并行搜索5个平台热点
4. ✅ 分析趋势和机会
5. ✅ **植物品种基于热点，不限于商品库**
6. ✅ 生成10个选题（含平台标签、爆款潜力评分）
7. ✅ **输出"商品采集建议"（选题涉及但商品库没有的植物）**
8. ✅ 保存报告至 `/选题库/2026-01-14_家居绿植_选题报告.md`
9. ✅ 输出完整报告给用户

**用户输入（带货模式）：**
```
帮我找家居绿植的选题 --sell
```

**正确执行：**
1-7 同上
8. ✅ **额外：匹配商品库，为选题关联已有商品**
9. ✅ 保存报告
10. ✅ 输出完整报告

---

## ❌ Anti-Patterns（禁止行为）

**禁止示例1：用商品库限制选题**
```
❌ "商品库只有绿萝和虎皮兰，所以选题只能围绕这两种植物"
❌ "先看商品库有什么，再做选题"
```
→ 应该基于热点做选题，植物品种不受限

**禁止示例2：强制商品匹配**
```
❌ 每个选题都必须匹配商品
❌ 没有匹配商品的选题被过滤掉
```
→ 商品匹配仅在带货模式下触发

**禁止示例3：忽略新植物**
```
❌ 选题涉及新植物但不输出采集建议
```
→ 应该输出"商品采集建议"反向完善商品库

---

## 错误处理

| 场景 | 处理方式 |
|------|----------|
| 行业太宽泛 | 自动细化为3-5个子领域 |
| 搜索结果不足 | 扩展时间范围（7天→30天） |
| 某平台数据缺失 | 跳过该平台，继续其他平台 |
| API超时 | 重试1次后跳过 |
| 输出路径不存在 | 自动创建目录 |

---

## 临时文件管理

**规则：**
- ✅ 所有测试/临时文件必须保存到专属临时文件夹
- ✅ 临时文件夹路径：`[输出目录]/.tmp/`
- ✅ 任务完成后自动清理
- ❌ 禁止临时文件散落在工作目录中

---

## 与其他技能联动

| 技能 | 触发场景 | 依赖关系 |
|------|----------|----------|
| `product-catalog` | 仅带货模式时调用 | **可选** |
| `xiaohongshu-content-generator` | 用户确认选题后生成小红书内容 | 可选 |
| `wechat-content-generator` | 用户确认选题后生成公众号内容 | 可选 |
| `video-script-generator` | 用户需要短视频脚本时 | 可选 |

---

## 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v4.0 | 2026-01-27 | **核心逻辑调整**：移除强制商品库绑定；植物品种基于热点不受限；商品匹配改为可选（仅带货模式）；新增"商品采集建议"反向完善商品库 |
| v3.0 | 2026-01-14 | 选题策略整合：选题优先级、选题模板、场景矩阵、临时文件管理 |
| v2.0 | 2026-01-14 | 商品库集成：自动匹配商品，输出商品关联机会 |
| v1.0 | 2026-01-14 | 初始版本：多平台选题发现 |
