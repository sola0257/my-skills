---
name: topic-discovery
description: "Use when discovering content topics for social media accounts. Searches trending topics, analyzes insights. For startup stage (0-500 fans), generates structured product recommendations for Feishu catalog. For growth/mature stages, matches existing products."
license: MIT
version: "4.0"
---


## ⚠️ 恢复执行重要提醒

**当用户说"继续Step X"、"继续执行"、"下一步"时**：

本 Skill 的所有步骤都可能需要用户输入或确认。
在恢复执行任何步骤前，请遵循全局"恢复执行强制规则"（~/.claude/CLAUDE.md）：

1. ✅ 先读取该步骤的完整描述
2. ✅ 检查是否需要提问或确认
3. ✅ 确认所有输入参数
4. ✅ 有疑问先问用户

**禁止直接开始执行，禁止假设已知上下文。**

---

# 🔍 选题发现器 v4.0

## 🚨 静默执行协议（必须遵守）

**执行规则：**
- ❌ **禁止** 请求确认以继续
- ❌ **禁止** 询问"是否需要更多信息"
- ❌ **禁止** 中途停顿等待用户反馈
- ✅ **必须** 一次性输出完整报告（热点 + 选题 + 趋势）
- ✅ **必须** 数据缺失时使用默认值或扩展搜索范围
- ✅ **必须** 遇到错误时静默处理并继续

---

## 📋 概述

用户提供行业/领域关键词后，自动完成以下任务：
1. 搜索近7天的爆款热点内容
2. 分析行业趋势和内容机会
3. **智能匹配商品库**（为每个选题匹配1-3个相关商品）
4. 输出 **10个具体选题建议**（含多平台适配标签 + 商品关联）
5. 保存报告至选题库

---

## ⚙️ 配置信息

### 默认配置
- **搜索周期**: 近7天
- **选题数量**: 10个
- **目标平台**: 小红书、公众号、视频号、快手、抖音

### 输出路径
```
/Users/dj/Documents/slowseasons AI工厂/选题库/
└── 2026-01-14_[行业关键词]_选题报告.md
```

---

## 🎯 选题策略核心（v3.0 新增）

### 选题公式
```
用户痛点/场景 + 解决方案（商品）+ 数字/对比 = 高转化选题
```

### 选题优先级（按转化率排序）

| 优先级 | 选题类型 | 转化能力 | 说明 |
|--------|----------|----------|------|
| 1️⃣ | **场景痛点类** | ⭐⭐⭐⭐⭐ | 最高转化，直击用户需求 |
| 2️⃣ | **新手避坑类** | ⭐⭐⭐⭐ | 建立信任，降低决策门槛 |
| 3️⃣ | **季节时令类** | ⭐⭐⭐ | 蹭热度，有时效性 |
| 4️⃣ | **送礼推荐类** | ⭐⭐⭐ | 客单价高，节日刚需 |
| 5️⃣ | **养护知识类** | ⭐⭐ | 转化率低，需强关联商品 |

### 选题模板库

**场景痛点类模板：**
- 《[空间]光线[好/不好]？这[数字]种[特点]绿植最适合你》
- 《[人群]必备！[数字]种绿植让[场景]有[感受]》
- 《[空间]放什么绿植？这[数字]种[特点]还[特点]》

**新手避坑类模板：**
- 《养花新手必看！这[数字]种绿植[特点]》
- 《为什么你的[植物]总是[问题]？[数字]个原因[数字]%的人都不知道》
- 《第一次养[植物]？避开这[数字]个坑》

**季节时令类模板：**
- 《[季节]养什么绿植？这[数字]种[特点]又[特点]》
- 《[季节]必买的[数字]种[类型]植物》

**送礼推荐类模板：**
- 《送[对象]什么绿植好？这[数字]种[特点]又[特点]》
- 《[场景]送什么？这[数字]种绿植最[特点]》

### 场景需求矩阵

| 场景分类 | 具体场景 | 用户痛点 | 推荐商品方向 |
|---------|---------|---------|-------------|
| **空间场景** | 客厅、卧室、厨房、卫生间、阳台、办公桌 | 光线、空间、湿度 | 耐阴、小型、耐湿 |
| **人群场景** | 租房党、上班族、新手、懒人、资深玩家 | 预算、时间、经验 | 平价、好养、耐旱、高端 |
| **功能场景** | 净化空气、装饰、送礼、风水 | 实用性、颜值、寓意 | 功能性、高颜值、寓意好 |
| **问题场景** | 光线不好、空间小、经常出差、有宠物 | 养不活、没地方、没时间、安全 | 耐阴、小型、耐旱、无毒 |

### 选题禁区 ⚠️

**不要做的选题：**
- ❌ **纯科普知识**：如《植物的光合作用》（用户不关心，转化率为0）
- ❌ **太宽泛的话题**：如《如何养好植物》（没有针对性）
- ❌ **没有商品关联**：如《植物的美学价值》（看完就走，没有转化）
- ❌ **负面内容**：如《这些植物有毒千万别养》（吓跑用户）

---

## 🔄 执行流程

### Step 1: 解析输入

**输入格式判断：**
| 输入类型 | 示例 | 处理方式 |
|----------|------|----------|
| 明确行业 | "家居绿植" | 直接搜索 |
| 模糊领域 | "关于生活" | 细化为3-5个子领域 |
| 带时间限定 | "最近一周的AI热点" | 调整搜索时间范围 |
| 指定平台 | "适合小红书的美妆选题" | 优先该平台权重 |

**默认值规则：**
- 未指定时间 → 默认近7天
- 未指定平台 → 输出全平台建议
- 未指定数量 → 默认10个选题

### Step 2: 深度行业研究（v4.0 升级）

**⚠️ 强制要求：必须使用 GPT Researcher MCP 进行深度研究**

**调用工具**：`mcp__gptr-mcp__deep_research`

**⚠️ 错误处理**：
- 如果 deep_research API 返回 429 错误（限流）
- 必须使用 WebSearch 作为备选方案
- 扩展搜索范围（7天→30天）
- 继续执行后续步骤，不中断流程

**研究维度**（3个并行查询）：
1. **热门话题挖掘**
   - 查询：`[行业] 2026 热门话题 小红书 抖音 公众号`
   - 重点：识别高评论度、高互动的话题

2. **评论区深度分析**
   - 查询：`[行业] 用户痛点 评论区 争论点 需求`
   - 重点：提取真实用户的困惑、抱怨、需求

3. **商品需求挖掘**
   - 查询：`[行业] 周边产品 工具 配件 用户推荐`
   - 重点：识别话题中隐含的商品需求

**研究输出**：
- 热门话题列表（含热度指数、评论量、争论点）
- 用户痛点清单（从评论区提取）
- 商品需求矩阵（话题 → 可匹配商品类型）
- 趋势判断（上升/稳定/下降/新兴）

**为什么用 deep_research**：
- 比 WebSearch 更深入，能分析评论区
- 能识别用户真实需求和痛点
- 为商品匹配提供更准确的依据

### Step 3: 趋势分析

**分析维度：**
| 维度 | 分析内容 |
|------|----------|
| 内容形式 | 图文 vs 短视频 vs 长视频的热度对比 |
| 话题周期 | 是短期热点还是长期趋势 |
| 情绪基调 | 正向激励 / 问题解决 / 情感共鸣 |
| 受众画像 | 主要目标人群特征 |
| 竞争程度 | 内容饱和度评估 |

**趋势判断标记：**
- 📈 **上升趋势** - 热度持续增长
- 📊 **稳定** - 热度平稳
- 📉 **下降趋势** - 热度减退
- 🆕 **新兴话题** - 刚出现的机会点

### Step 4: 生成选题建议

**每个选题包含：**
| 字段 | 说明 |
|------|------|
| 选题标题 | 具体可执行的选题方向 |
| 选题角度 | 切入点和差异化描述 |
| 目标人群 | 受众画像 |
| 内容形式 | 图文 / 短视频 / 长视频 |
| 推荐平台 | 带权重的平台标签 |
| 爆款潜力 | 1-5星评分 |
| 参考标题 | 各平台适配的标题示例 |

**平台标签系统：**
```
🔴 小红书 - 适合种草、教程、生活方式
🟢 公众号 - 适合深度、干货、专业内容
🔵 抖音   - 适合娱乐、热点、短平快
🟡 快手   - 适合实用、接地气、真实感
🟣 视频号 - 适合品质、调性、私域导流
```

**爆款潜力评分规则：**
| 星级 | 判断标准 |
|------|----------|
| ⭐⭐⭐⭐⭐ | 热点上升期 + 低竞争 + 多平台适配 |
| ⭐⭐⭐⭐☆ | 热点稳定期 + 中等竞争 |
| ⭐⭐⭐☆☆ | 长期需求 + 竞争较大 |
| ⭐⭐☆☆☆ | 下降趋势或高度饱和 |

### Step 4.5: 商品关联（v4.0 重构）🛒

**⚠️ 重要：根据账号阶段选择不同的商品策略**

#### 阶段判断

**⚠️ 强制要求：必须先读取账号配置，不能假设**

读取账号阶段配置：
```bash
# 读取账号阶段配置
cat ~/.claude/CLAUDE.md | grep -A 20 "## 多平台账号配置"
```

**账号阶段标准：**
- **起号期**：0-500粉
- **成长期**：500-2000粉
- **成熟期**：2000+粉

**⚠️ 禁止假设**：
- ❌ "我知道是起号期，直接生成商品建议"
- ✅ 必须先读取 CLAUDE.md，确认当前阶段

#### 策略A：起号期（0-500粉）- 从选题提取商品需求

**核心逻辑**：选题 → 商品需求 → 商品建议

**执行流程**：
1. **分析每个选题的商品需求**（强制步骤）
   - 从选题标题、角度、痛点中提取商品关键词
   - 识别用户在这个话题下可能需要的商品
   - 优先识别周边品需求（花盆、土、肥、工具）
   - **⚠️ 禁止凭空推荐**：必须从选题内容中提取需求

2. **商品分类优先级**（起号阶段）
   | 优先级 | 商品分类 | 原因 | 示例 |
   |--------|---------|------|------|
   | 🥇 **容器类** | 花盆、花器、托盘 | 配送简单、退货率低、复购高 | 陶瓷花盆、塑料花盆、花架 |
   | 🥇 **基质类** | 营养土、陶粒、水苔 | 刚需、消耗品、复购高 | 营养土3L装、椰糠砖 |
   | 🥇 **养护类** | 花肥、营养液、杀虫剂 | 高频需求、客单价适中 | 通用营养液、有机肥 |
   | 🥇 **工具类** | 喷壶、剪刀、铲子 | 实用、耐用、口碑传播 | 园艺工具套装、喷雾瓶 |
   | 🥈 **绿植类** | 活体植物 | 配送复杂、退货率高、起号期慎重 | 多肉植物、小型盆栽 |

   **⚠️ 重要**：
   - 必须优先推荐周边品（容器/基质/养护/工具）
   - 绿植本身作为次要选项，仅在话题强相关时推荐

3. **为每个选题推荐3-5个商品**（强制要求）
   - 每个商品包含完整的飞书表格字段（9个字段）
   - 输出格式可直接复制到飞书多维表格
   - **⚠️ 禁止简化输出**：必须包含所有字段

**飞书商品库表字段映射**：
```python
{
    "商品名称": "具体商品名称（如：龟背竹盆栽）",
    "商品分类": "分类（如：观叶植物/多肉植物/花卉）",
    "价格": "建议价格区间（如：29.9-49.9）",
    "库存": "建议初始库存（如：50）",
    "商品链接": "待补充（上架后填写）",
    "爆款潜力": "高/中/低（基于选题热度判断）",
    "适用平台": "小红书/公众号/视频号/快手/抖音",
    "创建时间": "自动生成当前日期",
    "备注": "推荐理由（如：契合春季养护热点，搜索量高）"
}
```

**输出示例**（起号期）：
```markdown
### 📦 商品建议（可直接录入飞书商品库）

#### 选题1：《春季换盆指南：3个信号告诉你该换盆了》

**商品需求分析**：
- 核心需求：换盆操作需要花盆、营养土、工具
- 痛点：不知道选什么尺寸的盆、用什么土
- 优先推荐：容器类、基质类、工具类

| 商品名称 | 商品分类 | 价格 | 库存 | 爆款潜力 | 适用平台 | 备注 |
|---------|---------|------|------|---------|---------|------|
| 陶瓷花盆套装（3个装） | 容器类 | 29.9-39.9 | 100 | 高 | 小红书/抖音 | 契合换盆话题，多尺寸满足不同需求 |
| 营养土5L装（通用型） | 基质类 | 19.9-29.9 | 150 | 高 | 全平台 | 刚需消耗品，复购率高 |
| 园艺工具3件套 | 工具类 | 15.9-25.9 | 80 | 中 | 小红书/公众号 | 实用工具，适合新手 |
| 陶粒1kg装 | 基质类 | 9.9-15.9 | 120 | 中 | 全平台 | 排水必备，客单价低易转化 |

#### 选题2：《办公桌绿植养护：3个技巧让植物不黄叶》

**商品需求分析**：
- 核心需求：办公桌场景需要小型容器、养护用品
- 痛点：浇水不方便、忘记施肥
- 优先推荐：养护类、容器类

| 商品名称 | 商品分类 | 价格 | 库存 | 爆款潜力 | 适用平台 | 备注 |
|---------|---------|------|------|---------|---------|------|
| 喷雾瓶200ml | 工具类 | 9.9-15.9 | 200 | 高 | 小红书/抖音 | 办公桌场景刚需，高频使用 |
| 通用营养液500ml | 养护类 | 19.9-29.9 | 100 | 高 | 全平台 | 解决施肥痛点，使用简单 |
| 迷你陶瓷花盆（单个） | 容器类 | 12.9-19.9 | 150 | 中 | 小红书/公众号 | 办公桌尺寸，颜值高 |
```

**⚠️ 注意**：
- 起号期优先推荐周边品（容器、基质、养护、工具）
- 绿植本身作为次要选项，仅在话题强相关时推荐
- 每个选题的商品建议必须与选题内容强相关
- **禁止凭空推荐**：必须从选题中提取商品需求
- **禁止简化输出**：必须包含所有9个飞书表格字段

**Feishu MCP 调用示例**（可选）：
```python
# 如果需要直接写入飞书表格
from mcp import feishu_add_product

for product in product_recommendations:
    feishu_add_product(
        name=product['商品名称'],
        category=product['商品分类'],
        price=product['价格'],
        stock=product['库存'],
        link=""  # 待补充
    )
```

#### 策略B：成长期/成熟期（500+粉）- 匹配现有商品

**调用 product-catalog 进行商品匹配：**

```python
import pandas as pd

# 商品库路径
PRODUCT_EXCEL = "/Users/dj/Documents/slowseasons AI工厂/商品库/商品数据.xlsx"

def match_products_for_topic(topic_keywords, max_results=3):
    """
    为选题匹配相关商品
    
    参数:
        topic_keywords: 从选题中提取的关键词列表
        max_results: 最多返回商品数
    
    返回:
        匹配的商品列表
    """
    df = pd.read_excel(PRODUCT_EXCEL)
    df = df[df['商品状态'] == '销售中']
    
    scored = []
    for _, row in df.iterrows():
        score = 0
        search_text = f"{row['商品名称']} {row['商品分组']} {row['商品卖点']} {row['分享描述']}"
        
        for keyword in topic_keywords:
            if keyword in search_text:
                score += 1
                # 名称中包含关键词加权
                if keyword in str(row['商品名称']):
                    score += 2
        
        if score > 0:
            scored.append((score, {
                'name': row['商品名称'],
                'price': row['价格（元）'],
                'category': row['商品分组']
            }))
    
    scored.sort(key=lambda x: x[0], reverse=True)
    return [s[1] for s in scored[:max_results]]

# 使用示例
# 选题：春季阳台绿植养护
keywords = ["春季", "阳台", "绿植", "养护", "盆栽"]
matched_products = match_products_for_topic(keywords)

# 输出：[{'name': '营养土3L装', 'price': 29.9, 'category': '土壤基质'}, ...]
```

**匹配策略：**
| 选题类型 | 关键词提取 | 匹配数量 |
|----------|------------|----------|
| 养护类 | 提取品类词（绿植、花盆、土壤） | 2-3个 |
| 场景类 | 提取场景词（阳台、室内、桌面） | 1-2个 |
| 节日类 | 提取节日词+品类词 | 2-3个 |
| 通用内容 | 提取核心关键词 | 0-1个 |

**输出格式：**
在每个选题中增加"商品关联机会"字段：
```
**商品关联机会**：营养土3L装、陶瓷花盆、发财树
```

**⚠️ 自动化规则：**
- 无匹配商品时，该字段显示"无"或跳过
- 不因商品匹配失败而中断流程
- 商品信息仅作为创作参考，不强制植入

---

### 🚩 红旗列表 - 商品策略执行检查

**如果你有以下想法，立即停止并重新执行 Step 4.5：**

| 红旗 | 正确做法 |
|------|---------|
| "我知道是起号期，直接生成商品建议" | ❌ 必须先读取账号配置，不能假设 |
| "只输出商品名称和价格就够了" | ❌ 必须包含所有飞书表格字段（9个字段） |
| "起号期也可以从商品库匹配" | ❌ 起号期=商品库是空的，只能生成建议 |
| "成长期可以生成商品建议" | ❌ 成长期必须从商品库匹配，不能生成 |
| "用户没要求飞书格式，简化输出" | ❌ 起号期必须输出飞书格式，这是核心需求 |
| "先推荐绿植，再推荐周边品" | ❌ 起号期必须优先推荐周边品（容器、基质、养护、工具） |
| "商品建议可以不分析选题需求" | ❌ 必须从选题中提取商品需求，不能凭空推荐 |
| "用 WebSearch 就够了" | ❌ 必须优先用 GPT MCP deep_research 做深度研究 |
| "deep_research 失败就停止" | ❌ 必须使用 WebSearch 作为备选方案，继续执行 |

### 常见合理化与反驳

| 合理化 | 现实 |
|--------|------|
| "账号配置不会变，我记得是起号期" | 账号配置会更新（粉丝增长），必须每次读取 |
| "用户只需要商品名称，其他字段可选" | 飞书表格需要完整字段，缺少任何字段都无法录入 |
| "起号期也可以匹配商品库，如果有合适的" | 起号期的前提是商品库是空的，匹配违背了需求 |
| "简化输出更高效" | 不完整的输出需要用户手动补充，反而降低效率 |
| "两种策略可以混用" | 混用会导致逻辑混乱，必须严格区分阶段 |
| "绿植是主营业务，应该优先推荐" | 起号期配送复杂、退货率高，周边品更适合 |
| "WebSearch 速度快，deep_research 太慢" | 深度研究能分析评论区，找到真实需求，质量>速度 |
| "deep_research 失败就放弃" | 必须使用 WebSearch 作为备选方案，确保流程完整 |

---

### Step 5: 生成报告并保存

**报告文件命名：**
```
[日期]_[行业关键词]_选题报告.md
示例：2026-01-14_家居绿植_选题报告.md
```

---

## 📄 输出模板

```markdown
# 🔥 [行业] 选题发现报告

> 📅 生成时间：[YYYY-MM-DD HH:mm]
> 📊 数据周期：近7天
> 🎯 覆盖平台：小红书 / 公众号 / 抖音 / 快手 / 视频号

---

## 📊 行业热点概览

| 热点话题 | 热度指数 | 趋势 | 主要平台 |
|----------|----------|------|----------|
| [话题1] | ⭐⭐⭐⭐⭐ | 📈 上升 | 🔴🔵 |
| [话题2] | ⭐⭐⭐⭐☆ | 📊 稳定 | 🟢🟣 |
| [话题3] | ⭐⭐⭐☆☆ | 🆕 新兴 | 🔴🟡 |
| ... | ... | ... | ... |

---

## 💡 选题推荐

### 1️⃣ [选题标题]

| 维度 | 内容 |
|------|------|
| **选题角度** | [切入点描述] |
| **目标人群** | [受众画像] |
| **内容形式** | 图文 / 短视频 |
| **推荐平台** | 🔴小红书 🟢公众号 |
| **爆款潜力** | ⭐⭐⭐⭐☆ |
| **商品关联机会** | [匹配的商品名称] |

**参考标题：**
- 🔴 小红书：「[适合小红书的标题]」
- 🟢 公众号：「[适合公众号的标题]」
- 🔵 抖音：「[适合抖音的标题]」

---

### 2️⃣ [选题标题]
... (重复格式，共10个选题)

---

## 📈 趋势洞察

### 🔺 上升趋势
1. [趋势描述1]
2. [趋势描述2]

### 🎯 内容机会
1. [机会点1 + 执行建议]
2. [机会点2 + 执行建议]

### ⚠️ 避坑提醒
1. [需要规避的内容方向]
2. [过度饱和的话题]

---

## 🚀 下一步行动

选择心仪的选题后，使用以下技能快速生成内容：

| 目标平台 | 触发词示例 |
|----------|------------|
| 小红书 | `帮我生成小红书图文，选题是：[选题X]` |
| 公众号 | `帮我生成订阅号推文，选题是：[选题X]` |
| 短视频脚本 | `帮我写[选题X]的短视频脚本` |

---

*报告由 Topic Discovery Skill v1.0 自动生成*
```

---

## ✅ Good Case（正确示例）

**用户输入：**
```
帮我找家居绿植的选题
```

**正确执行：**
1. ✅ 识别行业：家居绿植
2. ✅ 并行搜索5个平台热点
3. ✅ 分析趋势和机会
4. ✅ **读取商品库，为每个选题匹配1-3个相关商品**
5. ✅ 生成10个选题（含平台标签、爆款潜力评分、商品关联）
6. ✅ 保存报告至 `/选题库/2026-01-14_家居绿植_选题报告.md`
7. ✅ 输出完整报告给用户

---

## ❌ Anti-Patterns（禁止行为）

**禁止示例1：中途询问确认**
```
❌ "我找到了一些热点，要继续分析吗？"
❌ "请问您想要多少个选题？"
```
→ 应直接使用默认值完成全部流程

**禁止示例2：输出不完整**
```
❌ 只输出3个选题
❌ 缺少平台标签
❌ 没有趋势分析
❌ 没有商品关联机会
```
→ 必须输出完整报告（10选题 + 趋势洞察 + 商品匹配）

**禁止示例3：选题过于笼统**
```
❌ "可以做绿植相关内容"
❌ "养护知识"
```
→ 应输出具体可执行的选题，如「小户型阳台绿植选择指南」

---

## 🛠️ 错误处理

| 场景 | 处理方式 |
|------|----------|
| 行业太宽泛 | 自动细化为3-5个子领域 |
| 搜索结果不足 | 扩展时间范围（7天→30天） |
| 某平台数据缺失 | 跳过该平台，继续其他平台 |
| API超时 | 重试1次后跳过 |
| 输出路径不存在 | 自动创建目录 |

---

## 📁 临时文件管理（v3.0 新增）

**规则：**
- ✅ 所有测试/临时文件必须保存到专属临时文件夹
- ✅ 临时文件夹路径：`[输出目录]/.tmp/`
- ✅ 任务完成后自动清理
- ❌ 禁止临时文件散落在工作目录中

**临时文件目录结构：**
```
/Users/dj/Documents/slowseasons AI工厂/选题库/
├── 2026-01-14_[行业关键词]_选题报告.md  # 正式输出
└── .tmp/
    ├── search_cache_*.json    # 搜索缓存
    └── debug_*.log            # 调试日志
```

---

## 🔗 与其他技能联动

| 技能 | 触发场景 | 依赖关系 |
|------|----------|----------|
| `product-catalog` | 选题生成时自动调用 | **必需**（v2.0 新增） |
| `xiaohongshu-content-generator` | 用户确认选题后生成小红书内容 | 可选 |
| `wechat-content-generator` | 用户确认选题后生成公众号内容 | 可选 |
| `video-script-generator` | 用户需要短视频脚本时 | 可选 |

---

## 📝 版本历史

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v4.0 | 2026-02-06 | **深度研究+选题即选品**：<br>1. Step 2 升级为 GPT MCP deep_research（评论区分析、痛点挖掘）<br>2. 起号期商品策略重构：从选题提取商品需求<br>3. 商品分类优先级：周边品（容器/基质/养护/工具）> 绿植<br>4. 新增8条红旗+7条合理化反驳 |
| v3.0 | 2026-01-14 | **选题策略整合**：选题优先级、选题模板、场景矩阵、临时文件管理 |
| v2.0 | 2026-01-14 | **商品库集成**：自动匹配商品，输出商品关联机会 |
| v1.0 | 2026-01-14 | 初始版本：多平台选题发现 |
